# Astro ãƒŠãƒ¬ãƒƒã‚¸ã‚µã‚¤ãƒˆè¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**ä½œæˆæ—¥:** 2025-10-13  
**ç›®çš„:** Gist ã‚„ Zenn ã®è¨˜äº‹ã‚’é›†ç´„ã—ã¦è¡¨ç¤ºã™ã‚‹ãƒŠãƒ¬ãƒƒã‚¸ã‚µã‚¤ãƒˆã®è¨­è¨ˆæ›¸ã€‚

---

## ğŸ¯ ã‚´ãƒ¼ãƒ«

- Gist / Zenn è¨˜äº‹ã‚’ä¸€è¦§ãƒ»è©³ç´°è¡¨ç¤º
- ã‚¿ã‚°ãƒ»æ¤œç´¢ãƒ»ã‚½ãƒ¼ã‚¹åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- OGP / RSS / Sitemap å¯¾å¿œ
- GitHub Actions ã«ã‚ˆã‚‹è‡ªå‹•æ›´æ–°

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹æˆ

```
/src
  /pages
    index.astro
    /knowledge
      index.astro
      [slug].astro
  /components
    KnowledgeCard.astro
    Filters.astro
    TagList.astro
  /lib
    /clients
      gist.ts
      zenn.ts
    /adapters
      normalize.ts
      cache.ts
    search.ts
  /data
    entries.json
    tags.json
/scripts
  fetch-knowledge.ts
.env
```

- `scripts/fetch-knowledge.ts`: ãƒ“ãƒ«ãƒ‰å‰ã«ãƒ‡ãƒ¼ã‚¿åé›†ã‚’å®Ÿè¡Œ
- `entries.json`: Gist / Zenn ã‚’çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒã«æ­£è¦åŒ–ã—ã¦ä¿å­˜
- `GitHub Actions`: æ¯æ—¥è‡ªå‹•æ›´æ–°

---

## ğŸ§© ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```ts
export type KnowledgeEntry = {
  id: string;
  source: "gist" | "zenn";
  slug: string;
  title: string;
  summary: string;
  url: string;
  tags: { raw: string; norm: string }[];
  publishedAt: string;
  updatedAt?: string;
  contentHtml?: string;
  author?: string;
  image?: string;
};
```

---

## ğŸ”§ ãƒ‡ãƒ¼ã‚¿å–å¾—

### Gist

- API: `GET /users/:username/gists`
- description / ãƒ•ã‚¡ã‚¤ãƒ«æœ¬æ–‡ã‚’æŠ½å‡º
- ã‚¿ã‚°ã¯ `#ã‚¿ã‚°` ã¾ãŸã¯ description ã® `[]` ã‹ã‚‰æŠ½å‡º
- å·®åˆ†å–å¾—: `ETag` / `If-None-Match` åˆ©ç”¨

### Zenn

- RSS ãƒ•ã‚£ãƒ¼ãƒ‰: `https://zenn.dev/<user>/feed`
- `categories` â†’ ã‚¿ã‚°
- `contentSnippet` â†’ æ¦‚è¦

---

## âš™ï¸ ãƒ“ãƒ«ãƒ‰å‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```ts
const [gists, zenn] = await Promise.all([
  fetchGists(...),
  fetchZennRss(...),
]);

const entries = normalizeAll({ gists, zenn });
fs.writeFile('src/data/entries.json', JSON.stringify(entries, null, 2));
```

- `prebuild` ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿½åŠ ã—ã¦è‡ªå‹•ç”Ÿæˆ

---

## ğŸ§­ ãƒšãƒ¼ã‚¸è¨­è¨ˆ

### ä¸€è¦§ãƒšãƒ¼ã‚¸

- æ¤œç´¢ / ãƒ•ã‚£ãƒ«ã‚¿ / ãƒšãƒ¼ã‚¸ãƒ³ã‚°
- URLã‚¯ã‚¨ãƒªç®¡ç†: `?q=react&tag=astro`

### è©³ç´°ãƒšãƒ¼ã‚¸

- `getStaticPaths` ã§å…¨ã‚¹ãƒ©ãƒƒã‚°ç”Ÿæˆ
- è¨˜äº‹æœ¬æ–‡ or å¤–éƒ¨ãƒªãƒ³ã‚¯è¡¨ç¤º
- JSON-LD ã«ã‚ˆã‚‹æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›

---

## ğŸ§  æ¤œç´¢ã¨ãƒ•ã‚£ãƒ«ã‚¿

- Astroå´ã§ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚µãƒãƒªãƒ¼ã®éƒ¨åˆ†ä¸€è‡´æ¤œç´¢ï¼‰
- URLã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚ˆã‚‹çŠ¶æ…‹ç®¡ç†

---

## ğŸ§± SEO å¯¾å¿œ

- OGP / meta / JSON-LD
- `/rss.xml` `/sitemap.xml`
- `/knowledge/[slug]` ã«æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›

---

## ğŸª„ GitHub Actions

```yaml
name: Update knowledge
on:
  schedule: [{ cron: "0 21 * * *" }] # JST 6:00
jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v4
      - run: pnpm i
      - run: pnpm tsx scripts/fetch-knowledge.ts
      - run: |
          git config user.name "bot"
          git config user.email "bot@users.noreply.github.com"
          git add src/data/*.json
          git diff --quiet && echo "No changes" || git commit -m "chore(data): refresh knowledge"
          git push
```

---

## ğŸŒ± æ‹¡å¼µä½™åœ°

- microCMS / Qiita / Note ãªã©ã®è¿½åŠ 
- D1 ã‚„ Supabase ã«å…¨æ–‡ä¿å­˜
- OGP å‹•çš„ç”Ÿæˆ
- Vercel Revalidate Hook

---

## âœ… å®Ÿè£…æ‰‹é †

1. Astro + Tailwind ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
2. `scripts/fetch-knowledge.ts` å®Ÿè£…
3. `entries.json` èª­ã¿è¾¼ã¿ã§ä¸€è¦§ãƒ»è©³ç´°ä½œæˆ
4. æ¤œç´¢ / ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½è¿½åŠ 
5. RSS / Sitemap / SEO è¨­å®š
6. GitHub Actions ã§è‡ªå‹•æ›´æ–°
