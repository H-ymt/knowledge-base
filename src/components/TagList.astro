---
import type { Tag } from "@/lib/types";

export interface Props {
  tags: ReadonlyArray<Tag>;
  linkBase?: string; // 例: "/knowledge"
  paramName?: string; // 例: "tag"
}

const { tags, linkBase = "/knowledge", paramName = "tag" } = Astro.props as Props;

function buildHref(norm: string): string {
  const url = new URL(linkBase, "http://local");
  url.searchParams.set(paramName, norm);
  const path = url.pathname + (url.search ? url.search : "");
  return path;
}
---

<ul class="flex flex-wrap gap-2" aria-label="タグ一覧">
  {
    tags.map((t) => (
      <li>
        <a href={buildHref(t.norm)} class="border-main-300 hover:bg-main-50 rounded-full border px-2 py-0.5 text-xs">
          #{t.norm}
        </a>
      </li>
    ))
  }
  {tags.length === 0 && <li class="text-main-body-lighter text-sm">タグがありません</li>}
</ul>
